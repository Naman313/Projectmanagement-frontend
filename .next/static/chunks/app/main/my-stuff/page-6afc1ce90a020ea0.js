(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[114],{524:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(5155),r=s(2115);let n=(0,s(9946).A)("MoveLeft",[["path",{d:"M6 8L2 12L6 16",key:"kyvwex"}],["path",{d:"M2 12H22",key:"1m8cig"}]]);var l=s(3464),c=s(6766);let i="https://projectmanagementbackend-0rjw.onrender.com/api";function o(){let[e,t]=(0,r.useState)(null),[s,o]=(0,r.useState)([]),[d,m]=(0,r.useState)(!0),[u,h]=(0,r.useState)(null),[x,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{p()},[]);let p=async()=>{try{var e;let s=await l.A.get("".concat(i,"/users/profile"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});(null===(e=s.data)||void 0===e?void 0:e._id)?t(s.data._id):h("User ID not found")}catch(e){console.error("Error fetching user ID:",e),h("Failed to fetch user ID")}};(0,r.useEffect)(()=>{e&&f(e)},[e]);let f=async e=>{try{let t=await l.A.get("".concat(i,"/projects"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(Array.isArray(t.data)){let s=t.data.flatMap(t=>t.milestones&&Array.isArray(t.milestones)?t.milestones.filter(t=>t.assignedTo.includes(e)).map(e=>({...e,projectId:t._id,projectName:t.name})):[]);o(s)}else console.error("Unexpected API response format:",t.data),o([])}catch(e){console.error("Error fetching projects:",e),o([])}finally{m(!1)}},j=async(t,a)=>{try{var r;let n=s.map(e=>e._id===t?{...e,status:"pending"===e.status?"completed":"pending",completedOn:"pending"===e.status?new Date().toISOString():null}:e);o(n);let c=(null===(r=n.find(e=>e._id===t))||void 0===r?void 0:r.status)||"pending",d="completed"===c?new Date().toISOString():null;await l.A.patch("".concat(i,"/projects/").concat(a,"/milestones/").concat(t),{status:c,completedOn:d},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),f(e)}catch(e){console.error("Error updating milestone status:",e)}};return d?(0,a.jsx)("div",{children:"Loading..."}):u?(0,a.jsx)("div",{children:u}):(0,a.jsx)(a.Fragment,{children:x?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"w-full bg-gray-50 pl-5 pb-4",children:(0,a.jsxs)("button",{className:"flex items-center justify-center text-center bg-[#5D56BD] text-white px-3 py-1 rounded-lg font-light text-[14px] gap-2",onClick:()=>g(!1),children:[(0,a.jsx)(n,{className:"w-4"})," ",(0,a.jsx)("p",{children:"Go Back"})]})}),(0,a.jsxs)("div",{className:"m-3 min-h-[500px] rounded-lg bg-white p-6",children:[(0,a.jsx)("h1",{className:"text-xl font-medium mb-4 font-sans",children:"My Completed Assignments"}),s.filter(e=>"completed"===e.status).length>0?(0,a.jsx)("ul",{className:"space-y-4 w-full",children:s.filter(e=>"completed"===e.status).map(e=>(0,a.jsxs)("li",{className:"p-4 bg-gray-50 rounded shadow-sm flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:!0,disabled:!0,className:"w-5 h-5 text-blue-500 border-gray-300 rounded focus:ring-2 focus:ring-blue-500 mr-2"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-medium text-gray-700",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["Due Date: ",new Date(e.dueDate).toLocaleDateString()," |"," ",(0,a.jsx)("span",{className:"font-light",children:e.projectName})]})]})]},e._id))}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,a.jsx)(c.default,{src:"/assets/Campfire Illustration.png",alt:"No Assignments Available",width:400,height:400}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"No completed assignments available"})]})]})]}):(0,a.jsxs)("div",{className:"h-screen bg-white p-6",children:[(0,a.jsx)("h1",{className:"text-xl font-sans font-medium mb-4",children:"My Assignments"}),(0,a.jsx)("ul",{className:"space-y-4",children:s.length>0?s.map(e=>(0,a.jsxs)("li",{className:"p-4 bg-gray-50 rounded shadow-sm flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:"completed"===e.status,onChange:()=>j(e._id,e.projectId)}),(0,a.jsxs)("div",{className:"flex-1 ml-3",children:[(0,a.jsx)("p",{className:"text-lg text-gray-700",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["Due Date: ",new Date(e.dueDate).toLocaleDateString()," |"," ",(0,a.jsx)("span",{className:"font-light",children:e.projectName})]})]})]},e._id)):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,a.jsx)(c.default,{src:"/assets/Campfire Illustration.png",alt:"No Assignments Available",width:400,height:400}),(0,a.jsx)("p",{className:"text-gray-600",children:"No assigned milestones found."})]})}),(0,a.jsx)("button",{className:"mt-6 px-4 py-2 text-[#5D56BD] font-normal rounded",onClick:()=>g(!0),children:"Show My Completed Assignments"})]})})}},4328:(e,t,s)=>{Promise.resolve().then(s.bind(s,6756))},6756:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),r=s(2115),n=s(524),l=s(3464);function c(){let[e,t]=(0,r.useState)(null),[s,c]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=localStorage.getItem("token");if(!e){o("User not authenticated."),c(!1);return}let s=await l.A.get("".concat("https://projectmanagementbackend-0rjw.onrender.com/api","/users/profile"),{headers:{Authorization:"Bearer ".concat(e)}});t(s.data._id)}catch(e){console.error("Error fetching user ID:",e),o("Failed to fetch user data.")}finally{c(!1)}};return s?(0,a.jsx)("div",{className:"h-screen flex items-center justify-center",children:"Loading..."}):i?(0,a.jsx)("div",{className:"h-screen flex items-center justify-center text-red-500",children:i}):(0,a.jsx)("div",{className:"h-screen bg-gray-50 m-6",children:e?(0,a.jsx)(n.A,{userId:e}):(0,a.jsx)("div",{className:"text-center",children:"User not found"})})}},9946:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:c=2,absoluteStrokeWidth:i,className:o="",children:d,iconNode:m,...u}=e;return(0,a.createElement)("svg",{ref:t,...l,width:r,height:r,stroke:s,strokeWidth:i?24*Number(c)/Number(r):c,className:n("lucide",o),...u},[...m.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let s=(0,a.forwardRef)((s,l)=>{let{className:i,...o}=s;return(0,a.createElement)(c,{ref:l,iconNode:t,className:n("lucide-".concat(r(e)),i),...o})});return s.displayName="".concat(e),s}}},e=>{var t=t=>e(e.s=t);e.O(0,[766,464,441,684,358],()=>t(4328)),_N_E=e.O()}]);