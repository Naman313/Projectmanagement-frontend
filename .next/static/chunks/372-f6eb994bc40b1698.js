"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[372],{6938:(e,t,s)=>{s.d(t,{A:()=>r});var l=s(5155),a=s(5799);function r(){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(a.N9,{position:"top-center",autoClose:2e3,newestOnTop:!0,pauseOnHover:!0,theme:"light"})})}},7324:(e,t,s)=>{s.d(t,{A:()=>A});var l=s(5155),a=s(2115),r=s(4416),i=s(7965),n=s(6766),d=s(3464),c=s(5695);let A=e=>{let{mutate:t,fromOverview:s,onClose:A,onAddMember:o,teamMembers:x}=e,[m,u]=(0,a.useState)([]),[h,p]=(0,a.useState)(""),[g,j]=(0,a.useState)([]),[f,v]=(0,a.useState)(!1),[N,b]=(0,a.useState)([]),{id:w}=(0,c.useParams)(),C=e=>{b(t=>t.some(t=>t._id===e._id)?t:[...t,{...e,role:""}]),v(!1),p("")},B=async e=>{try{await d.A.delete("".concat("https://projectmanagementbackend-0rjw.onrender.com/api","/projects/project/").concat(w,"/members/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),j(t=>t.filter(t=>t._id!==e)),b(t=>t.filter(t=>t._id!==e)),t()}catch(e){console.error("Error removing member:",e)}},y=async(e,l)=>{if(s&&"remove"===l){await B(e);return}if("remove"===l){b(t=>t.filter(t=>t._id!==e)),j(t=>t.filter(t=>t._id!==e&&"remove"!==t.role));return}j(s=>s.map(s=>{if(s._id===e&&s.role!==l){let e={...s,role:l};return setTimeout(()=>o(e),0),e}return t(),s}))};return(0,a.useEffect)(()=>{let e=setTimeout(async()=>{if(!h.trim()){u([]);return}try{let e=(await d.A.get("".concat("https://projectmanagementbackend-0rjw.onrender.com/api","/users/search?name=").concat(h),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data.filter(e=>!g.some(t=>t._id===e._id)&&!x.some(t=>t._id===e._id));u(e),v(!0)}catch(e){console.error("Error fetching users:",e)}},500);return()=>clearTimeout(e)},[h,g,x]),(0,a.useEffect)(()=>{j(x)},[]),(0,a.useEffect)(()=>{j([...x,...N].reduce((e,t)=>e.find(e=>e._id===t._id)?e:[...e,t],[]))},[N,x]),(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center h-auto bg-black/30 overflow-y-auto no-scrollbar",children:(0,l.jsxs)("div",{className:"bg-white rounded-xl h-[600px] shadow-lg w-[550px] mt-[200px] p-5 relative",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h2",{className:"text-[19px] font-medium text-[#333333]",children:"Add Team Members"}),(0,l.jsx)("button",{onClick:A,className:"text-[#333333] hover:text-gray-600",children:(0,l.jsx)(r.A,{className:"w-5 h-5"})})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("div",{className:"flex relative w-[440px]",children:(0,l.jsx)("div",{className:"flex items-center w-full gap-2",children:(0,l.jsxs)("div",{className:"flex flex-grow p-0.5 overflow-y-auto border-[1.5px] rounded-lg min-h-[40px] max-h-auto ",children:[N.map(e=>(0,l.jsxs)("div",{className:"flex items-center mt-0.5 gap-2 bg-[#5D56BD] rounded-full px-2",children:[(0,l.jsx)("img",{className:"w-5 h-5 rounded-full"}),(0,l.jsx)("div",{className:"text-xs",children:(0,l.jsx)("p",{className:"font-medium text-[#FFFFFF] leading-none",children:e.fullName})}),(0,l.jsx)("button",{onClick:()=>b(t=>t.filter(t=>t._id!==e._id)),className:"text-[#FFFFFF]",children:(0,l.jsx)(r.A,{className:"w-4 h-4"})})]},e._id)),(0,l.jsx)("span",{className:"flex flex-end",children:(0,l.jsx)("input",{type:"text",placeholder:"Add others by name",className:"flex-grow px-3 py-1.5 min-w-[120px] text-sm border-none outline-none placeholder-[#B3B3B3]",onChange:e=>{v(!0),p(e.target.value)},value:h})})]})})}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{className:"bg-[#565DBD] text-[#FFFFFF] px-4 py-2.5 rounded-[8px] text-[13px]",children:" Add"})})]}),(0,l.jsx)("div",{className:"relative",children:f&&m.length>0&&(0,l.jsx)("div",{className:"mt-1 absolute border-[1.5px] rounded-lg text-sm    w-[440px]    z-50 shadow-sm bg-white",children:m.slice(0,5).map(e=>(0,l.jsxs)("div",{className:"flex text-[#333333] px-1",children:[(0,l.jsx)(n.default,{src:i.A,alt:e.fullName,className:"w-8 h-8 rounded-full m-2"}),(0,l.jsx)("div",{onClick:()=>C(e),className:"cursor-pointer px-2 py-2 hover:bg-[#F7F7FC] w-full mt-2",children:e.fullName})]},e._id))})}),(0,l.jsxs)("div",{className:"absolute mt-4 w-[480px] z-0",children:[(0,l.jsxs)("div",{className:"flex text-sm justify-between text-gray-500 mb-4 z-0",children:[(0,l.jsxs)("span",{children:["Team members (",g.length,")"]}),(0,l.jsx)("span",{className:"",children:"Roles"})]}),(0,l.jsx)("div",{className:"",children:g.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(n.default,{src:i.A,alt:e.fullName,width:36,height:36,className:" rounded-full p-0.5"}),(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:"text-[13.5px] text-[#333333]",children:e.fullName})})]}),(0,l.jsxs)("select",{className:" py-4 text-sm rounded-lg  text-[#333333] translate-x-12",value:e.role||"",onChange:t=>y(e._id,t.target.value),children:[(0,l.jsx)("option",{value:"",children:"Select Role"}),(0,l.jsx)("option",{value:"owner",children:"Owner"}),(0,l.jsx)("option",{value:"admin",children:"Admin"}),(0,l.jsx)("option",{value:"user",children:"User"}),(0,l.jsx)("option",{value:"client",children:"Client"}),s&&(0,l.jsx)("option",{value:"remove",children:"Remove"})]})]},e._id))})]})]})})}},7710:(e,t,s)=>{s.d(t,{A:()=>m});var l=s(5155),a=s(2115),r=s(4416),i=s(7924),n=s(5799),d=s(6938),c=s(3464),A=s(6766),o=s(7965),x=s(5695);let m=e=>{let{handleMileStoneFetch:t,onClose:s,teamMembers:m,setmileStone:u,fromOverview:h}=e,[p,g]=(0,a.useState)(""),[j,f]=(0,a.useState)([]),[v,N]=(0,a.useState)(""),[b,w]=(0,a.useState)(""),C=m.filter(e=>{var t;return null==e?void 0:null===(t=e.fullName)||void 0===t?void 0:t.toLowerCase().includes((null==b?void 0:b.toLowerCase())||"")}),{id:B}=(0,x.useParams)(),y=async()=>{if(!p||(null==j?void 0:j.length)===0||!v){n.oR.error("Please fill in all fields.");return}let e={projectId:B,title:p,assignedTo:m.filter(e=>j.includes(e.fullName)).map(e=>e._id)||[],dueDate:v,status:"pending"};try{let l=await c.A.post("".concat("https://projectmanagementbackend-0rjw.onrender.com/api","/projects/project/add-milestone"),e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});200===l.status&&(t(),s())}catch(e){console.error("Failed to create project:",e),n.oR.error("Failed to add milestone")}},F=e=>{j&&f(t=>(null==t?void 0:t.includes(e))?t.filter(t=>t!==e):[...t||[],e])};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.A,{}),(0,l.jsx)("div",{className:"fixed inset-0 no-scrollbar flex items-center overflow-y-auto justify-center bg-black/35 z-50",children:(0,l.jsx)("div",{className:"bg-white rounded-[10px] shadow-lg w-[570px] h-[560px] ml-[10px] mt-[250px] pl-2",children:(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-[19px] font-medium text-[#333333]",children:"Add Milestone"}),(0,l.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,l.jsx)(r.A,{className:"w-5 h-5"})})]}),(0,l.jsxs)("div",{className:"space-y-4 mt-[10px]",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-[13.5px] text-[#333333] ",children:"Project Milestone"}),(0,l.jsx)("textarea",{placeholder:"Enter project milestone...",className:"w-full h-[65px] px-3 pb-6 pt-2 placeholder-[#B3B3B3] bg-white  rounded-md text-sm text-wrap border border-[#CCCCCC] ",value:p,onChange:e=>g(e.target.value)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm text-[#333333] mb-1.5",children:"Assigned to"}),(0,l.jsxs)("div",{className:"relative mb-2",children:[(0,l.jsx)("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none ",children:(0,l.jsx)(i.A,{className:"w-4 h-4 text-[#808080]"})}),(0,l.jsx)("input",{type:"text",placeholder:"Search team member",className:"w-full pl-10 pr-3 py-2 bg-white border border-[#CCCCCC]  rounded-md text-sm placeholder-[#B3B3B3] ",value:b,onChange:e=>w(e.target.value)})]}),(0,l.jsx)("div",{className:"w-full h-[160px] border rounded-md border-[#CCCCCC]",children:(0,l.jsx)("div",{className:"flex flex-wrap gap-1 py-2 px-2",children:C.slice(0,5).map(e=>(0,l.jsxs)("div",{onClick:()=>F(e.fullName),className:"relative flex items-center bg-[#FAFAFA] text-[#333333] gap-1.5 px-4 py-2 hover:cursor-pointer",children:[j.includes(e.fullName)&&(0,l.jsx)("div",{className:"absolute top-[10px] right-0 bg-[#6BBD56] text-[#FAFAFA] text-xs    w-4 h-4 flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-white",children:"âœ“"})}),(0,l.jsx)(A.default,{src:o.A,alt:e.fullName,width:36,height:36,className:"rounded-full"}),(0,l.jsxs)("div",{className:"text-[12px]",children:[(0,l.jsx)("p",{className:" text-[#333333]",children:e.fullName}),(0,l.jsxs)("p",{className:"text-[10px] text-[#4D4D4D]",children:["(",e.role,")"]})]})]},e._id))})})]}),(0,l.jsxs)("div",{className:"w-[160px]",children:[(0,l.jsx)("label",{className:"block text-sm  text-[#333333] mb-1.5",children:"Due Date"}),(0,l.jsx)("input",{type:"date",className:"w-full px-1 py-2 bg-white border-[1.5px]   rounded-lg text-sm  placeholder-[#B3B3B3]",value:v,onChange:e=>N(e.target.value)})]})]}),(0,l.jsx)("div",{className:"mt-6 flex justify-end gap-2",children:(0,l.jsx)("button",{onClick:()=>{if(h){y();return}if(!p||(null==j?void 0:j.length)===0||!v){n.oR.error("Please fill in all fields.");return}let e={_id:Date.now(),description:p,assignedTo:j.join(" "),dueDate:v};u(t=>[...t,e]),s()},className:"px-10 py-2 bg-[#5D56BD] text-white rounded-lg text-[13px]  hover:bg-[#4A44A7]",children:"Add"})})]})})})]})}},7965:(e,t,s)=>{s.d(t,{A:()=>l});let l={src:"/_next/static/media/avtar.571ec6c1.jpg",height:150,width:150,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAT/xAAUAQEAAAAAAAAAAAAAAAAAAAAE/9oADAMBAAIQAxAAAAC0Ed//xAAeEAACAgAHAAAAAAAAAAAAAAABAgMRABITFCMxQf/aAAgBAQABPwATtupIpDp8yKmZDZFeG+jj/8QAGREAAQUAAAAAAAAAAAAAAAAAAgABAxJx/9oACAECAQE/AJQYa4v/xAAYEQADAQEAAAAAAAAAAAAAAAABAgMAUf/aAAgBAwEBPwCNGYMT3f/Z",blurWidth:8,blurHeight:8}},9480:(e,t,s)=>{s.d(t,{A:()=>l});let l={src:"/_next/static/media/Plus Icon Manage Team.57db42f8.png",height:48,width:48,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAD1BMVEX///9MaXH///////////9badqkAAAABXRSTlMjABBJDHAhSHIAAAAJcEhZcwAACxMAAAsTAQCanBgAAAApSURBVHicVYtBCgAwDIM07f/fPAZboacIGgxAJKh30EQBu6o3PDXxvx8K+ABNt2Cc5wAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}}}]);